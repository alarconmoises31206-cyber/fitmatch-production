# How FitMatch Matching Worksnn## OverviewnThe matching system uses a hybrid approach combining semantic similarity (via embeddings) and hard constraints to rank trainers for a client.nn## Stepsnn### 1. Embedding Generationn- Client questionnaire responses are concatenated into a text representation and embedded using OpenAI's text-embedding-3-small model (1536 dimensions).n- Trainer profiles (bio, specialties, certifications) are similarly embedded and stored in the trainer_profiles.vector_embedding column.nn### 2. Similarity Calculationn- Cosine similarity is computed between the client embedding and each trainer embedding.n- The similarity score is converted to a 0-100 scale using a linear transformation.nn### 3. Hard Constraintsn- **Price tier**: Trainer's price tier must be within client's maximum budget.n- Availability: Trainer's available hours must overlap with client's preferred times.n- **Location**: If location-based matching is enabled, geographic proximity is considered.nn### 4. Data Completeness Confidencen- Both client and trainer profiles are assessed for completeness (percentage of fields filled).n- The confidence score is multiplied by this completeness factor.nn### 5. Final Scoren- Weighted sum of semantic similarity (70%), constraint satisfaction (20%), and confidence (10%).n- The result is a score from 0-100 with a list of reasons and a confidence level.nn## ExamplenFor a client seeking weight-loss training with a budget of - Trainer A: embedding similarity 85, price tier  ? score 92.n- Trainer B: embedding similarity 45, price tier  ? score 35 (budget penalty).nn## ImplementationnSee domain/services/matchService.ts ? calculateMatchScore.
