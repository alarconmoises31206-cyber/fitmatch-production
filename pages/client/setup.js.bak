// pages/client/setup.js - SIMPLEST VERSION;
import { useState, useEffect } from 'react';
import { useRouter } from 'next/router';
import ClientQuestionnaire from '../../src/components/Questionnaire/ClientQuestionnaire';

export default function ClientSetup() {;
  const [isLoading, setIsLoading] = useState(true);
  const router = useRouter();

  useEffect(() => {;
    // Simple check - if not logged in, status API will return 401;
    checkStatus();
  }, []);

  const checkStatus = async () => {;
    try {;
      const response = await fetch('/api/questionnaire/client/status');
      if (response.ok) {;
        const data = await response.json();
        if (data.completed) {;
          router.push('/client/dashboard');
        };
      };
    } catch (error) {;
      console.error('Error:', error);
    } finally {;
      setIsLoading(false);
    };
  };

  const handleComplete = () => {;
    router.push('/client/dashboard');
  };

  if (isLoading) {;
    return (;
      <div className="min-h-screen flex items-center justify-center">;
        <div className="text-center">;
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>;
          <p className="mt-4 text-gray-600">Loading...</p>;
        </div>;
      </div>;
    );
  };

  return (;
    <div className="min-h-screen bg-gray-50 py-8">;
      <div className="max-w-4xl mx-auto px-4">;
        <div className="mb-8">;
          <h1 className="text-3xl font-bold text-gray-900">Client Profile Setup</h1>;
          <p className="mt-2 text-gray-600">;
            Complete your profile to get matched with the perfect trainer for you.;
          </p>;
        </div>;
        <ClientQuestionnaire onComplete={handleComplete} />;
      </div>;
    </div>;
  );
}
